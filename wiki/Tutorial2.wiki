=Tutorial 2: Adding enemies=

This tutorial is a followup for [Tutorial1 Tutorial 1]. Make sure you have followed the instructions in that tutorial before continuing with this tutorial.

An !EntityPlus map is no fun without enemies, so this tutorial will explain the steps to follow to add an enemy to your map. Note that this tutorial only explains the basics. For more extensive details about the entities involved, refer to the !EntityPlus manual.

==Creating the map==

The starting point for this tutorial is where tutorial 1 left off. Load that map file again and perform the following steps:

  # Add a second trigger_multiple entity to the map. Make sure it doesn't overlap the existing trigger_multiple entity. It's wise to mark the locations of the two trigger_multiple entities with a brush so you know where they are in-game.
  # Give the new trigger_multiple a _wait_ key of -1 to make sure we'll only spawn one enemy into the game.
  # Add a _nobots_ key to the old trigger_multiple (the one targeting the target_finish entity) and give it a value of 1. This is done so that the enemy we are going to spawn won't accidentally run into this trigger_multiple and activate it.
  # Add a target_botspawn entity and place it in the position where you want the enemy to spawn. 
  # Give the target_botspawn entity a _health_ key with a value of 25. This will give the bot 25 health which means he's relatively easy to kill. Also add a _clientname_ key to the target_botspawn and give it a value like "sarge" or "visor" or some other bot's name. You can omit this key as well. The game will default to "sarge" then.
  # Check the WP_SHOTGUN spawnflag for the target_botspawn entity to make sure the enemy spawns with a shotgun. You can check other WP`_` spawnflags as well to spawn the enemy with those weapons.
  # Have the new trigger_multiple target the target_botspawn entity.

If you compile the map and load it in the game, you'll be able to run into the new trigger_multiple and you'll see that a bot spawns into the map. It's possible that he doesn't move after spawning, most likely when he spawns with his back to you. Shooting the bot will eventually kill it. Run into the trigger_multiple that targets the target_finish and you'll see that you've actually accumulated some points this time around.

A more realistic behavior is to have enemies patrol along certain paths. !EntityPlus allows you to define bot patrol routes using info_waypoint entities. Follow these steps to define a route for our bot to patrol:

  # Add an info_waypoint entity and put it in a location where you want your bot to run to after spawning.
  # Check the IGNORE_PLAYER spawnflag on the target_botspawn entity. This will make sure that the bot will always ignore the player. This allows us to view the bot running along it's patrol route without having it attack us and break free from it's patrolling routine. Note that if no IGNORE_PLAYER spawnflag is present, you're probably runnning an older version of the mod that does not support this yet. [https://code.google.com/p/entityplus/downloads/list Download the most recent version] before continuing this tutorial.
  # Have the target_botspawn target the info_waypoint entity.
  # Add another info_waypoint entity and put it in a second location where you want your bot to run to after reaching the first waypoint. It's no problem to put an info_waypoint entity in the same location as your target_botspawn, but it's something I wouldn't recommend due to one entity obscuring the other in the editor.
  # Have the first info_waypoint target the second info_waypoint.
  # Add a third info_waypoint entity and have the second info_waypoint target the third info_waypoint.

Compile the map and load it in the game. After triggering the target_botspawn by running into the appropriate trigger, you'll notice that the bot starts running towards the first waypoint, then to the second and then to the third. Once the third waypoint is reached, the bot will run back to the second and then to the first again. The bot will continue running up and down the patrol route until it's killed. 

It's also possible to set up circular patrol routes. You can do this by making one simple adjustment to the map: have the third info_waypoint target the first info_waypoint. After compiling and loading the map, you'll notice that the bot will now run directly back to the first waypoint after reaching the third waypoint rather than backtracking along the waypoints.


A tip: Because it's an odd sight to see a bot appear out of nowhere in a map, it's good practice to have bots spawn into the game in a location where the player can't see them (yet). For example, place a trigger_multiple before a corner of a corridor and put the target_botspawn entity (or entities) after the corner. The player can't see the bots spawn into the game now which gives the impression like they always were there. 